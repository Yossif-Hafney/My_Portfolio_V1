import{j as e,L as T,F as V,f as Y,r as d,u as D,B as Q}from"./index-z1eQj2TF.js";import{u as q,a as H,L as O,E as W}from"./useProject-C2rB3WJV.js";function $({id:s,image:t,title:n,description:r,tags:l,onClick:u,onMouseEnter:a}){return e.jsx(T,{to:"/projects/$projectid",params:{projectid:s.toString()},onClick:u,onMouseEnter:a,children:e.jsxs("div",{id:`project-card-${s}`,className:"group h-full flex flex-col bg-[#13283a] border border-gray-700/60 rounded-xl shadow-lg overflow-hidden transition-all duration-300 hover:shadow-2xl hover:-translate-y-0.5 cursor-pointer",children:[e.jsx("img",{className:"w-full h-48 object-cover",src:t,alt:n,loading:"lazy"}),e.jsxs("div",{className:"flex flex-col flex-1 p-5",children:[e.jsx("h3",{className:"text-lg sm:text-xl font-semibold text-white mb-2 line-clamp-1",children:n}),e.jsx("p",{className:"text-gray-300/90 text-sm mb-4 line-clamp-3 flex-1",children:r}),l&&l.length>0&&e.jsxs("div",{className:"flex flex-wrap gap-1 mt-auto",children:[l.slice(0,3).map((f,g)=>e.jsx("span",{className:"px-2 py-1 bg-blue-500/20 text-blue-300 border border-blue-500/30 rounded text-xs",children:f},g)),l.length>3&&e.jsxs("span",{className:"px-2 py-1 bg-gray-500/20 text-gray-300 border border-gray-500/30 rounded text-xs",children:["+",l.length-3]})]})]})]})})}function J({showFilters:s,query:t,setQuery:n,branch:r,setBranch:l,branches:u}){return s?e.jsxs("div",{className:"mb-12",children:[e.jsxs("div",{className:"text-center mb-10",children:[e.jsx("h1",{className:"text-5xl sm:text-6xl font-extrabold bg-gradient-to-r from-blue-300 via-purple-300 to-blue-500 bg-clip-text text-transparent mb-3 tracking-tight",children:"Projects Portfolio"}),e.jsx("p",{className:"text-slate-400 text-lg sm:text-xl max-w-2xl mx-auto",children:"Explore my diverse range of projects across different technologies and domains"}),e.jsx("div",{className:"mt-4 h-1 w-28 mx-auto rounded-full bg-gradient-to-r from-blue-500 via-purple-500 to-blue-600"})]}),e.jsxs("div",{className:"flex flex-col lg:flex-row items-stretch gap-4",children:[e.jsxs("div",{className:"flex-1 relative group",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none",children:e.jsx("svg",{className:"h-5 w-5 text-slate-400 group-focus-within:text-blue-400 transition-colors duration-200",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})}),e.jsx("input",{type:"text",placeholder:"Search projects by name, description, or technology...",value:t,onChange:a=>n(a.target.value),className:"w-full pl-12 pr-12 py-4 bg-slate-900/50 backdrop-blur-sm border border-slate-700/50 rounded-2xl text-slate-100 placeholder-slate-400 focus:outline-none focus:border-blue-500/50 focus:ring-4 focus:ring-blue-500/20 transition-all duration-300 text-lg"}),!t&&e.jsx("span",{className:"absolute right-3 top-1/2 -translate-y-1/2 text-slate-400 group-focus-within:text-blue-400 transition-colors duration-200 pointer-events-none",children:e.jsx(V,{icon:Y,className:"text-lg sm:text-xl md:text-2xl transition-transform group-hover:scale-110"})}),t&&e.jsx("button",{type:"button",onClick:()=>n(""),"aria-label":"Clear search",className:"absolute right-3 top-1/2 -translate-y-1/2 text-slate-400 hover:text-slate-200 transition-colors duration-200",children:"Ã—"})]}),e.jsxs("div",{className:"lg:w-80 flex items-center gap-3",children:[e.jsxs("div",{className:"relative group flex-1",children:[e.jsxs("select",{value:r,onChange:a=>l(a.target.value),className:"w-full appearance-none px-6 py-4 bg-slate-900/50 backdrop-blur-sm border border-slate-700/50 rounded-2xl text-slate-100 focus:outline-none focus:border-purple-500/50 focus:ring-4 focus:ring-purple-500/20 transition-all duration-300 text-lg cursor-pointer",children:[e.jsx("option",{value:"",className:"bg-slate-900",children:"All Categories"}),u.map(a=>e.jsx("option",{value:a,className:"bg-slate-900",children:a},a))]}),e.jsx("div",{className:"absolute inset-y-0 right-0 pr-4 flex items-center pointer-events-none",children:e.jsx("svg",{className:"h-5 w-5 text-slate-400 group-focus-within:text-purple-400 transition-colors duration-200",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})})]}),r&&e.jsx("button",{type:"button",onClick:()=>l(""),className:"shrink-0 px-3 py-2 text-xs font-medium rounded-lg border border-purple-400/40 text-purple-300 hover:bg-purple-500/10 hover:border-purple-400/60 transition-colors duration-200","aria-label":"Clear category",children:"Clear"})]})]})]}):e.jsx("div",{className:"text-center mt-24 mb-16",children:e.jsxs("div",{className:"relative inline-block group",children:[e.jsx("div",{className:`absolute -inset-4 bg-gradient-to-r from-blue-600/30 via-purple-600/30 to-blue-800/30 rounded-3xl blur-xl opacity-40\r
         group-hover:opacity-60 transition-all duration-1000 animate-pulse`}),e.jsx("div",{className:`relative bg-slate-900/40 backdrop-blur-sm border border-slate-700/50\r
         rounded-3xl p-8 shadow-2xl`,children:e.jsx("div",{className:"mb-6",children:e.jsx("h2",{className:`text-5xl sm:text-6xl font-black bg-gradient-to-r from-blue-300\r
           via-purple-300 to-blue-500 bg-clip-text text-transparent mb-4 leading-tight tracking-tight`,children:"Featured Projects"})})})]})})}function z({showFilters:s,isFiltering:t,displayedCount:n,filteredCount:r,totalCount:l,resetFilters:u}){return!s||!t?null:e.jsxs("div",{className:"mb-8 relative overflow-hidden rounded-2xl bg-gradient-to-r from-slate-900/80 via-slate-800/60 to-slate-900/80 backdrop-blur-xl border border-slate-700/30 shadow-2xl",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-blue-600/10 via-purple-600/10 to-blue-600/10"}),e.jsxs("div",{className:"relative flex items-center justify-between px-6 py-4",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs("div",{className:"flex space-x-1",children:[e.jsx("div",{className:"w-2 h-2 bg-blue-400 rounded-full animate-pulse"}),e.jsx("div",{className:"w-2 h-2 bg-purple-400 rounded-full animate-pulse animation-delay-75"}),e.jsx("div",{className:"w-2 h-2 bg-blue-400 rounded-full animate-pulse animation-delay-150"})]}),e.jsxs("div",{className:"text-slate-300 text-sm",children:[e.jsxs("span",{className:"font-semibold bg-gradient-to-r from-blue-400 to-purple-400 bg-clip-text text-transparent",children:["Showing ",n," of ",r]})," ",e.jsx("span",{className:"text-slate-300",children:"filtered results"})," ",e.jsxs("span",{className:"text-slate-500 text-xs",children:["(",l," total)"]})]})]}),t&&e.jsxs("button",{type:"button",onClick:u,className:"group relative inline-flex items-center px-4 py-2 text-xs font-medium text-white bg-gradient-to-r from-red-500/20 to-pink-500/20 border border-red-400/30 rounded-lg hover:from-red-500/30 hover:to-pink-500/30 hover:border-red-400/50 transition-all duration-300 hover:scale-105 focus:outline-none focus:ring-2 focus:ring-red-400/50",children:[e.jsx("svg",{className:"w-3 h-3 mr-1.5 transition-transform duration-300 group-hover:rotate-90",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),"Clear Filters"]})]})]})}function K({showFilters:s,canLoadMore:t,onLoadMore:n}){return!s||!t?null:e.jsx("div",{className:"flex flex-col items-center mt-12 mb-8",children:e.jsxs("button",{onClick:n,className:"group relative inline-flex items-center justify-center px-8 py-4 text-lg font-semibold text-white transition-all duration-300 ease-out bg-gradient-to-r from-blue-600 via-purple-600 to-blue-800 rounded-xl shadow-lg hover:shadow-2xl hover:shadow-blue-500/25 hover:scale-105 focus:outline-none focus:ring-4 focus:ring-blue-500/50 active:scale-95 overflow-hidden",children:[e.jsx("span",{className:"absolute inset-0 w-full h-full bg-gradient-to-r from-blue-700 via-purple-700 to-blue-900 opacity-0 group-hover:opacity-100 transition-opacity duration-300"}),e.jsxs("span",{className:"relative flex items-center space-x-2",children:[e.jsx("span",{children:"Load More Projects"}),e.jsx("svg",{className:"w-5 h-5 transition-transform duration-300 group-hover:translate-x-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 14l-7 7m0 0l-7-7m7 7V3"})})]})]})})}function _(){const{data:s,isLoading:t,error:n}=q({queryKey:["projects-simple"],queryFn:async()=>{const r=await fetch("/api/projects-simple.json",{cache:"no-store"});if(!r.ok)throw new Error(`HTTP ${r.status}`);return await r.json()},staleTime:3e5});return{projects:s??[],loading:t,error:n?n.message:null}}function G(s){const[t,n]=d.useState(""),[r,l]=d.useState(""),[u,a]=d.useState("");d.useEffect(()=>{const i=setTimeout(()=>l(t),250);return()=>clearTimeout(i)},[t]);const f=d.useMemo(()=>{const i=new Set;for(const p of s)p.branches?.forEach(x=>i.add(x));return Array.from(i).sort()},[s]),g=d.useMemo(()=>{let i=s;if(r.trim()){const p=r.toLowerCase().trim();i=i.filter(x=>x.title.toLowerCase().includes(p)||x.description.toLowerCase().includes(p)||x.tags&&x.tags.some(w=>w.toLowerCase().includes(p)))}return u&&(i=i.filter(p=>p.branches?.includes(u))),i},[s,r,u]),y=!!(r.trim()||u);return{query:t,setQuery:n,debouncedQuery:r,branch:u,setBranch:a,branches:f,filteredProjects:g,isFiltering:y,resetFilters:()=>{n(""),a("")}}}function Z({limit:s,showFilters:t=!0}={}){const n=D(),[r,l]=d.useState(9),u="projects:listState",a=d.useRef(!1),f=d.useRef(null),g=d.useRef(!1),{projects:y,loading:h,error:i}=_(),p=H(),{query:x,setQuery:w,debouncedQuery:I,branch:N,setBranch:C,branches:M,filteredProjects:m,isFiltering:R,resetFilters:S}=G(y);d.useEffect(()=>{if(t)try{const o=sessionStorage.getItem(u);if(!o)return;const c=JSON.parse(o);if(!c)return;typeof c.query=="string"&&w(c.query),typeof c.branch=="string"&&C(c.branch),typeof c.displayCount=="number"&&c.displayCount>0&&l(c.displayCount),typeof c.scrollY=="number"&&(f.current=c.scrollY),a.current=!0,g.current=!0}catch{}},[t]),d.useEffect(()=>{if(t)return()=>{try{const o={query:x,branch:N,displayCount:r,scrollY:window.scrollY,ts:Date.now()};sessionStorage.setItem(u,JSON.stringify(o))}catch{}}},[t,x,N,r]),d.useEffect(()=>{if(t&&!a.current){if(g.current){g.current=!1;return}l(9)}},[I,N,t]);const j=d.useMemo(()=>s&&s>0?m.slice(0,s):t?m.slice(0,r):m,[m,s,t,r]);d.useEffect(()=>{if(!t||!a.current||h)return;try{const v=sessionStorage.getItem("projects:lastViewedId");if(v){const b=m.findIndex(k=>String(k.id)===v);if(b>=0&&b>=r){const k=b+1,L=6,P=Math.ceil(k/L)*L;l(E=>P>E?P:E)}}}catch{}if(f.current==null)return;const o=f.current,c=requestAnimationFrame(()=>{const v=sessionStorage.getItem("projects:lastViewedId");if(v){const b=document.getElementById(`project-card-${v}`);b&&b.scrollIntoView({block:"start",behavior:"auto"})}window.scrollTo({top:o,behavior:"auto"});try{sessionStorage.removeItem("projects:lastViewedId")}catch{}f.current=null,a.current=!1});return()=>cancelAnimationFrame(c)},[h,t,j.length,m,r]);const A=()=>{l(o=>o+6)},B=t&&j.length<m.length;return e.jsxs("div",{className:"py-5 sm:py-10 mt-5 sm:mt-10",children:[e.jsx("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:e.jsx(J,{showFilters:t,query:x,setQuery:w,branch:N,setBranch:C,branches:M})}),e.jsx("div",{className:"bg-[#0d2438] min-h-screen py-8 sm:py-10",children:e.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:[h&&e.jsx(O,{label:"Loading projects..."}),i&&e.jsx(W,{title:"Failed to load projects",message:i,actionLabel:"Retry",onAction:()=>window.location.reload()}),!h&&!i&&e.jsxs(e.Fragment,{children:[e.jsx(z,{showFilters:t,isFiltering:R,displayedCount:j.length,filteredCount:m.length,totalCount:y.length,resetFilters:S}),m.length===0?e.jsxs("div",{className:"text-center text-slate-300",children:[t?"No projects match your filters.":"No projects available.",t&&e.jsx("button",{type:"button",onClick:S,className:"ml-2 underline decoration-dotted hover:text-white",children:"Clear filters"})]}):e.jsx("div",{className:"grid gap-4 sm:gap-6 grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-3",children:j.map(o=>e.jsx($,{id:o.id,image:o.image,title:o.title,description:o.description,tags:o.tags,onClick:()=>{try{const c={query:x,branch:N,displayCount:r,scrollY:window.scrollY,pageH:document.documentElement.scrollHeight,ts:Date.now()};sessionStorage.setItem("projects:listState",JSON.stringify(c)),sessionStorage.setItem("projects:lastViewedId",String(o.id))}catch{}},onMouseEnter:p},o.id))})]})]})}),!h&&!i&&e.jsxs(e.Fragment,{children:[!t&&y.length>(s||6)&&e.jsx("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 py-8",children:e.jsx("div",{className:"flex justify-center items-center",children:e.jsx("button",{onClick:()=>n({to:"/projects"}),className:"inline-block",children:e.jsx(Q,{title:"View All Projects"})})})}),e.jsx(K,{showFilters:t,canLoadMore:B,filteredCount:m.length,onLoadMore:A})]}),!h&&!i&&j.length<=3&&j.length>0&&e.jsx("div",{className:"py-4"})]})}export{Z as P};
